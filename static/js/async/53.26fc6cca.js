"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["53"],{8934:function(e,n,r){r.r(n),r.d(n,{default:function(){return l}});var s=r(651),i=r(6971);function t(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",h2:"h2",h3:"h3",pre:"pre",code:"code",span:"span",br:"br",strong:"strong",h4:"h4"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"contributing",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#contributing",children:"#"}),"Contributing"]}),"\n",(0,s.jsx)(n.p,{children:"Thanks for showing interest in contributing! Contributions of any kind are welcome."}),"\n",(0,s.jsx)(n.p,{children:"You can contribute to Filenest by"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#development-workflow",children:"Adding or improving features or fixing bugs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#documentation",children:"Improving documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/filenest/filenest/issues",target:"_blank",rel:"noopener noreferrer",children:"Reporting bugs"})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"development-workflow",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#development-workflow",children:"#"}),"Development workflow"]}),"\n",(0,s.jsxs)(n.p,{children:["This project uses ",(0,s.jsx)(n.a,{href:"https://pnpm.io/",target:"_blank",rel:"noopener noreferrer",children:"pnpm"})," as the package manager. Make sure to install it first."]}),"\n",(0,s.jsxs)(n.h3,{id:"initial-installation",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#initial-installation",children:"#"}),"Initial installation"]}),"\n",(0,s.jsx)(n.pre,{className:"code",children:(0,s.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,s.jsxs)(n.code,{className:"language-sh",meta:"",children:[(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"clone"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"git@github.com:filenest/filenest.git"})]}),"\n",(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"filenest"})]}),"\n",(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"install"})]}),"\n",(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"build"})]}),"\n"]})})}),"\n",(0,s.jsxs)(n.h3,{id:"running-the-project",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#running-the-project",children:"#"}),"Running the project"]}),"\n",(0,s.jsx)(n.p,{children:"You'll need to open multiple terminals to run the project."}),"\n",(0,s.jsx)(n.p,{children:"First, run the following command in the root dir\nto start the watcher to build all packages on file changes."}),"\n",(0,s.jsx)(n.pre,{className:"code",children:(0,s.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,s.jsxs)(n.code,{className:"language-sh",meta:"",children:[(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"dev"})]}),"\n"]})})}),"\n",(0,s.jsxs)(n.p,{children:["In another terminal, you can run an example app to test your changes.",(0,s.jsx)(n.br,{}),"\n","If you want to add a new adapter, please also add an example app to test it."]}),"\n",(0,s.jsx)(n.pre,{className:"code",children:(0,s.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,s.jsxs)(n.code,{className:"language-sh",meta:"",children:[(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"examples/nextjs-trpc"})]}),"\n",(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"dev"})]}),"\n"]})})}),"\n",(0,s.jsxs)(n.h3,{id:"documentation",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#documentation",children:"#"}),"Documentation"]}),"\n",(0,s.jsx)(n.p,{children:"To run the docs development server, run the following command in the root dir."}),"\n",(0,s.jsx)(n.pre,{className:"code",children:(0,s.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,s.jsxs)(n.code,{className:"language-sh",meta:"",children:[(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"docs:dev"})]}),"\n"]})})}),"\n",(0,s.jsx)(n.p,{children:"You can build the docs by running:"}),"\n",(0,s.jsx)(n.pre,{className:"code",children:(0,s.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,s.jsxs)(n.code,{className:"language-sh",meta:"",children:[(0,s.jsxs)(n.span,{className:"line line-number",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"docs:build"})]}),"\n"]})})}),"\n",(0,s.jsxs)(n.h3,{id:"testing",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#testing",children:"#"}),"Testing"]}),"\n",(0,s.jsx)(n.p,{children:"Filenest was initially created without any tests,\nbecause it was first designed for personal use.\nWhen I decided to turn it into an open-source project,\nI wanted to move quickly and publish it as fast as possible to focus on my main project."}),"\n",(0,s.jsx)(n.p,{children:"Tests will be added incrementally, while the library is in beta."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Please open an issue or create a discussion if you want to take the initiative to add tests."})}),"\n",(0,s.jsxs)(n.h2,{id:"project-overview",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#project-overview",children:"#"}),"Project overview"]}),"\n",(0,s.jsxs)(n.p,{children:["This project is a monorepo using ",(0,s.jsx)(n.a,{href:"https://turbo.build/repo/docs",target:"_blank",rel:"noopener noreferrer",children:"Turborepo"}),".\nAll packages are located in the ",(0,s.jsx)(n.code,{children:"packages"})," directory."]}),"\n",(0,s.jsxs)(n.h3,{id:"filenestcore",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#filenestcore",children:"#"}),(0,s.jsx)(n.code,{children:"@filenest/core"})]}),"\n",(0,s.jsxs)(n.p,{children:["The core package contains the ",(0,s.jsx)(n.code,{children:"Provider"})," interface which all providers must implement."]}),"\n",(0,s.jsxs)(n.h3,{id:"filenestprovider-provider",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#filenestprovider-provider",children:"#"}),(0,s.jsx)(n.code,{children:"@filenest/provider-<provider>"})]}),"\n",(0,s.jsxs)(n.p,{children:["Each provider package contains the implementation of the ",(0,s.jsx)(n.code,{children:"Provider"})," interface for a specific provider."]}),"\n",(0,s.jsx)(n.p,{children:"It's important to use as few dependencies as possible and to avoid large SDKs (e.g. AWS SDK or Cloudinary SDK)."}),"\n",(0,s.jsxs)(n.p,{children:["Each provider package should communicate with the provider's REST API via plain ",(0,s.jsx)(n.code,{children:"fetch"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"adding-a-new-provider",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#adding-a-new-provider",children:"#"}),"Adding a new provider"]}),"\n",(0,s.jsxs)(n.p,{children:["Some provider methods must return specific error messages,\nso ",(0,s.jsx)(n.code,{children:"@filenest/react"})," can respond by showing alert dialogs, for example."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deleteFolder"})," should return ",(0,s.jsx)(n.code,{children:'{ success: false, message: "ERR_FOLDER_NOT_EMPTY" }'}),"\nwhen trying to delete a non-empty folder."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"renameAsset"})," should return ",(0,s.jsx)(n.code,{children:'{ success: false, message: "ERR_DELIVERY_URL_WILL_CHANGE" }'}),"\nwhen renaming an asset would change its delivery URL."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"renameAsset"})," should return ",(0,s.jsx)(n.code,{children:'{ success: false, message: "ERR_UPDATE_DELIVERY_URL_REQUIRED" }'}),"\nwhen renaming an asset would change the display name only, and can optionally change the delivery URL."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Also, make sure to prefix private methods and properties with an underscore ",(0,s.jsx)(n.code,{children:"_"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For implementation details, or as a guide to implement a new provider,"}),"\n",(0,s.jsxs)(n.strong,{children:["check out the ",(0,s.jsx)(n.a,{href:"https://github.com/filenest/filenest/blob/next/packages/provider-cloudinary/src/index.ts",target:"_blank",rel:"noopener noreferrer",children:"Cloudinary provider"}),"."]})]}),"\n",(0,s.jsxs)(n.h4,{id:"we-might-need-to-change-thereact-package",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#we-might-need-to-change-thereact-package",children:"#"}),"We might need to change the",(0,s.jsx)(n.code,{children:"react"})," package"]}),"\n",(0,s.jsx)(n.p,{children:"Uploading files is done by getting a signed URL from the Filenest API\nand uploading files to the provider directly from the client."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/filenest/filenest/blob/next/packages/react/src/context/global/FileQueueContext.tsx#L132-L184",target:"_blank",rel:"noopener noreferrer",children:"That code"}),"\nis currently tailored to Cloudinary, as that was the first provider, but it should be abstracted to work with any provider."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, Cloudinary needs a ",(0,s.jsx)(n.code,{children:"file"})," parameter to upload a file.\n",(0,s.jsx)(n.a,{href:"https://github.com/filenest/filenest/blob/next/packages/react/src/context/global/FileQueueContext.tsx#L153",target:"_blank",rel:"noopener noreferrer",children:"See this line of code"}),(0,s.jsx)(n.br,{}),"\n","Other providers might work differently and need different parameters, so this will need to be refactored."]}),"\n",(0,s.jsxs)(n.p,{children:["One way could be to implement a ",(0,s.jsx)(n.code,{children:"provider.getProvider()"})," method that returns the provider name as a string.",(0,s.jsx)(n.br,{}),"\n","With that result, we could switch between different upload implementations. There are probably better ways."]}),"\n",(0,s.jsxs)(n.h3,{id:"filenestadapter-adapter",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#filenestadapter-adapter",children:"#"}),(0,s.jsx)(n.code,{children:"@filenest/adapter-<adapter>"})]}),"\n",(0,s.jsx)(n.p,{children:"An adapter basically wraps a provider and returns its methods\nin a way to conform to a framework's API."}),"\n",(0,s.jsx)(n.p,{children:"If you want to add a new adapter, please also add an example app to test it."}),"\n",(0,s.jsxs)(n.h4,{id:"gotchas",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gotchas",children:"#"}),"Gotchas"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"An adapter should only accept POST requests.\nThis is because the React client uses POST requests to send input via the body."}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"middleware",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#middleware",children:"#"}),"Middleware"]}),"\n",(0,s.jsx)(n.p,{children:"If possible, an adapter should accept global or per-route middleware,\nso that a user can add authorization, logging, etc."}),"\n",(0,s.jsxs)(n.p,{children:["Check out the ",(0,s.jsx)(n.a,{href:"https://github.com/filenest/filenest/blob/next/packages/adapter-trpc/src/index.ts",target:"_blank",rel:"noopener noreferrer",children:"tRPC Adapter"})," for an example."]}),"\n",(0,s.jsxs)(n.h3,{id:"filenestreact",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#filenestreact",children:"#"}),(0,s.jsx)(n.code,{children:"@filenest/react"})]}),"\n",(0,s.jsx)(n.p,{children:"This package contains all frontend components."}),"\n",(0,s.jsxs)(n.p,{children:["Talking to the Filenest API is done using a ",(0,s.jsx)(n.a,{href:"https://github.com/filenest/filenest/blob/next/packages/react/src/utils/fetchers.ts",target:"_blank",rel:"noopener noreferrer",children:"fetchers"})," util,\nwhich is ",(0,s.jsxs)(n.a,{href:"https://github.com/filenest/filenest/blob/next/packages/react/src/context/global/GlobalContext.tsx#L70",target:"_blank",rel:"noopener noreferrer",children:["made available in the ",(0,s.jsx)(n.code,{children:"Global Context"})]}),"."]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(t,e)})):t(e)}let l=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["docs%2Fcontributing.md"]={toc:[{id:"development-workflow",text:"Development workflow",depth:2},{id:"initial-installation",text:"Initial installation",depth:3},{id:"running-the-project",text:"Running the project",depth:3},{id:"documentation",text:"Documentation",depth:3},{id:"testing",text:"Testing",depth:3},{id:"project-overview",text:"Project overview",depth:2},{id:"filenestcore",text:"`@filenest/core`",depth:3},{id:"filenestprovider-provider",text:"`@filenest/provider-<provider>`",depth:3},{id:"adding-a-new-provider",text:"Adding a new provider",depth:4},{id:"we-might-need-to-change-thereact-package",text:"We might need to change the`react` package",depth:4},{id:"filenestadapter-adapter",text:"`@filenest/adapter-<adapter>`",depth:3},{id:"gotchas",text:"Gotchas",depth:4},{id:"middleware",text:"Middleware",depth:4},{id:"filenestreact",text:"`@filenest/react`",depth:3}],title:"Contributing",frontmatter:{}}}}]);